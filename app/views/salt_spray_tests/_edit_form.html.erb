<div class="row">
  <div class="col-12">
    <label><strong>Shop Order:</strong></label>
    <span><%= @salt_spray_test.shop_order_number %></span>
    <label class="ml-3"><strong>Load:</strong></label>
    <span><%= @salt_spray_test.load_number %></span>
    <label class="ml-3"><strong>Process:</strong></label>
    <span><%= @salt_spray_test.process_code %></span>
  </div>
</div>
<div class="card bg-light">
  <div class="card-body">
    <%= form_with model: @salt_spray_test do |f| %>

      <% if @salt_spray_test.errors.any? %>
        <div id="error_explanation">
          <h2>
            <%= pluralize(@salt_spray_test.errors.count, "error") %> prohibited
            this article from being saved:
          </h2>
          <ul>
            <% @salt_spray_test.errors.full_messages.each do |msg| %>
              <li><%= msg %></li>
            <% end %>
          </ul>
        </div>
      <% end %>

      <div class="row">
        <div class="col-md-2">
          <div class="form-group">
            <%= f.label :put_on_at, class: 'form-control-label' %>
            <%= f.text_field :put_on_at, class: 'datepicker form-control', value: format_date(@salt_spray_test.put_on_at) %>
          </div>
          <div class="form-group">
            <%= f.label :put_on_by, class: 'form-control-label' %>
            <%= f.select :put_on_by, reporters_for_select, {include_blank: true}, {class: 'form-control'} %>
          </div>
        </div>
        <div class="col-md-2 offset-md-1">
          <div class="form-group">
            <%= f.label :date_with_white, class: 'form-control-label' %>
            <%= f.text_field :marked_white_at, class: 'datepicker form-control', value: format_date(@salt_spray_test.marked_white_at) %>
          </div>
          <div class="form-group">
            <%= f.label :marked_white_by, 'White spot reporter', class: 'form-control-label' %>
            <%= f.select :marked_white_by, reporters_for_select, {include_blank: true}, {class: 'form-control'} %>
          </div>
        </div>
        <div class="col-md-2 offset-md-1">
          <div class="form-group">
            <%= f.label :date_with_red, class: 'form-control-label' %>
            <%= f.text_field :marked_red_at, class: 'datepicker form-control', value: format_date(@salt_spray_test.marked_red_at) %>
          </div>
          <div class="form-group">
            <%= f.label :marked_red_by, 'Red spot reporter', class: 'form-control-label' %>
            <%= f.select :marked_red_by, reporters_for_select, {include_blank: true}, {class: 'form-control'} %>
          </div>
        </div>
        <div class="col-md-2 offset-md-1">
          <div class="form-group">
            <%= f.label :dept, 'Department:', class: 'form-control-label' %><br />
            <%= f.text_field :dept, class: 'form-control' %>
          </div>
          <div class="form-group">
            <%= f.fields_for :comment do |c| %>
              <%= c.label :content, 'Comments:', class: 'form-control-label' %><br />
              <%= c.text_area :content, class: 'form-control' %>
            <% end %>
          </div>
        </div>

      </div>
      <div class="row">
        <div class="col-md-3">
          <div class="form-group">
            <%= f.label nil, 'Attachments' %><br />
            <div id="salt_spray_attachments">
              <%= f.fields_for :attachments do |attachment| %>
                <%= render 'attachment_fields', f: attachment %>
              <% end %>
            </div>
            <div>
              <%= link_to_add_association 'Add Attachment', f, :attachments,
                                          :class => 'btn btn-sm btn-success text-right',
                                          :'data-association-insertion-node' => '#salt_spray_attachments',
                                          :'data-association-insertion-method' => 'append',
                                          :partial => 'new_attachment_fields' %>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="form-group">
            <%= f.label nil, 'Process Steps' %><br />
            <table class="table-responsive table-sm">
              <tbody id="salt_spray_processes">
                <%= f.fields_for :salt_spray_process_steps do |process| %>
                  <%= render 'process_fields', f: process %>
                <% end %>
              </tbody>
              <tfoot>
                <tr>
                  <td class="text-center">
                    <%= link_to_add_association 'Add Process Step', f, :salt_spray_process_steps,
                                                                    :class => 'btn btn-sm btn-success',
                                                                    :'data-association-insertion-node' => '#salt_spray_processes',
                                                                    :'data-association-insertion-method' => 'append',
                                                                    :partial => 'process_fields' %>
                  </td>
                </tr>
              </tfoot>
            </table>
          </div>
        </div>
      </div>
      <div class="col-md-6 manual-entry-inputs display-none">
        <div class="form-group">
          <%= f.label :customer, 'Customer:', class: 'form-control-label' %><br />
          <%= f.text_field :customer, disabled: true, class: 'form-control' %>
        </div>
        <div class="form-group">
          <%= f.label :process_code, 'Process:', class: 'form-control-label' %><br />
          <%= f.text_field :process_code, disabled: true, class: 'form-control' %>
        </div>
        <div class="form-group">
          <%= f.label :part_number, 'Part ID:', class: 'form-control-label' %><br />
          <%= f.text_field :part_number, disabled: true, class: 'form-control' %>
        </div>
        <div class="form-group">
          <%= f.label :part_area, 'Part Area:', class: 'form-control-label' %><br />
          <%= f.number_field :part_area, disabled: true, class: 'form-control', step: :any %>
        </div>
        <div class="form-group">
          <%= f.label :density, 'ft<sup>3</sup> Per Pound:'.html_safe, class: 'form-control-label' %><br />
          <%= f.number_field :density, disabled: true, class: 'form-control', step: :any %>
        </div>
        <div class="col-md-5 offset-md-1">
          <div class="form-group">
            <%= f.label :white_spec, 'White Spec:', class: 'form-control-label' %><br />
            <%= f.number_field :white_spec, disabled: true, class: 'form-control' %>
          </div>
          <div class="form-group">
            <%= f.label :red_spec, 'Red Spec:', class: 'form-control-label' %><br />
            <%= f.number_field :red_spec, disabled: true, class: 'form-control' %>
          </div>
          <div class="form-group">
            <%= f.label :load_weight, 'Load Weight:', class: 'form-control-label' %><br />
            <%= f.number_field :load_weight, disabled: true, class: 'form-control', step: :any %>
          </div>
        </div>
      </div>
      <div class="form-group">
        <br />
        <%= f.submit 'Edit Salt Spray Test', class: 'btn btn-primary' %>
        <%= link_to 'Cancel', salt_spray_tests_path, class: 'btn btn-link' %>
      </div>
    <% end %>
  </div>
</div>
