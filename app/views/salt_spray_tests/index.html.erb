<% provide(:title, 'Salt Spray Tests') %>
<div class="row mx-1">

  <div class="col-12 card bg-light mb-3">

    <div class="row">
      <strong class="col-6">Salt Spray Tests</strong>

      <% if @access_level.access_level == 3 -%>
        <strong class="col-6 text-danger text-uppercase text-right">
          Admin Mode
        </strong>
      <% end %>

    </div>

  </div>
  <div class="col-12">
    <div class="row d-none d-md-flex">
      <div class="col-6">
        <%= link_to 'Add Test', new_salt_spray_test_path, :class => "btn btn-success btn-sm" %>
      </div>
      <div class="col-6 text-right">
        <% if @salt_spray_tests.size != 0 -%>
          <%= filter_btn %>
        <% end %>
        <%= link_to 'View Archived Tests', archived_tests_salt_spray_tests_path, :class => "btn btn-sm btn-primary" %>
      </div>
    </div>
    <% if @salt_spray_tests.size == 0 -%>

      <p class="text-muted">No salt spray tests found.</p>

    <% else -%>

      <%= form_with url: salt_spray_tests_path, class: 'filter-form bg-warning hidden-print', method: 'get' do |f| %>
        <div class="row">
          <div class="col-md-2">
            <div class="form-group">
              <%= f.label :with_shop_order_number, 'Shop Order:'  %>
              <%= f.text_field :with_shop_order_number, class: 'form-control' %>
            </div>
          </div>
          <div class="col-md-2">
            <div class="form-group">
              <%= f.label :with_put_on_by, 'Put On By:'  %>
              <%= f.select :with_put_on_by, @salt_spray_tests.options_for_put_on_by, { include_blank: true }, { class: 'form-control' } %>
            </div>
          </div>
          <div class="col-md-2">
            <div class="form-group">
              <%= f.label :with_part_number, 'Part ID:'  %>
              <%= f.select :with_part_number, @salt_spray_tests.options_for_part_number, { include_blank: true }, { class: 'form-control' } %>
            </div>
          </div>
          <div class="col-md-3">
            <div class="form-group">
              <%= f.label :with_put_on_at_gte, 'Date On - Start:' %>
              <%= f.date_field :with_put_on_at_gte, class: 'form-control' %>
            </div>
          </div>
          <div class="col-md-3">
            <div class="form-group">
              <%= f.label :with_put_on_at_lte, 'Date On - End:' %>
              <%= f.date_field :with_put_on_at_lte, class: 'form-control' %>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-12">
            <%= link_to 'Reset Filters', archived_tests_salt_spray_tests_url, class: 'btn btn-sm btn-link float-left' %>
            <%= f.submit 'Filter', name: nil, class: 'float-right' %>
          </div>
        </div>
      <% end %>

      <div id="salt_spray_test_results" class="d-none d-md-block">
        <%= render 'table' %>
      </div>
      <div class="d-md-none">
        <%= render 'mobile_table' %>
      </div>

      <!-- Modal -->
      <div id="modal-window" class="modal fade" role="dialog">
        <div class="modal-dialog">

          <!-- Modal content-->
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Salt Spray Information</h5>
              <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
              <div id="part_info"></div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
          </div>

        </div>
      </div>

    <% end %>

  </div>
</div>
